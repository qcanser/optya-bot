import time
import os
import telebot
import pandas
import feedparser
import random
import schedule
import requests
import json
from easygoogletranslate import EasyGoogleTranslate
from flask import Flask, request
from datetime import datetime
from time import mktime
from multiprocessing import *
from telebot import types


TOKEN = "5218759908:AAFRlXyzPtk-25nmMjOCexKpSO4W9L_DkRQ"
bot = telebot.TeleBot(TOKEN)
group_id = "-1001579039420"
translator = EasyGoogleTranslate(
    source_language='en',
    target_language='ru',
    timeout=10
)

def start_process():
    p1 = Process(target=TimeSchedule.start_schedule, args=()).start()

class TimeSchedule():
    def start_schedule():
        schedule.every().day.at("00:00").do(TimeSchedule.send_congratulations)
        schedule.every().day.at("21:08").do(TimeSchedule.nicejoke)
        # schedule.every().friday.at("13:15").do(TimeSchedule.send_new_podcast)

        while True:
            schedule.run_pending()
            time.sleep(1)


    def send_congratulations():
        data = pandas.read_csv("birthdays.csv")
        today = datetime.now()
        today_tuple = (today.month, today.day)
        birthdays_dict = {(data_row["month"], data_row["day"]): data_row for (index, data_row) in data.iterrows()}

        if today_tuple in birthdays_dict:
            birthday_person = birthdays_dict[today_tuple]
            name = birthday_person["name"]
            bot.send_message(group_id, f"Ğ¡ Ğ”Ğ½Ñ‘Ğ¼ Ğ Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ {name}! ğŸ¥³ğŸ¥³ğŸ¥³ğŸ‘‹ğŸ‘‹ğŸ‘‹ğŸ”ˆğŸ”ˆğŸ”ˆğŸºğŸºğŸºğŸ»ğŸ»ğŸ»ğŸ˜ƒğŸ˜ƒğŸ˜ƒ")
        else:
            bot.send_message(group_id, 'Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ½ĞµÑ‚ Ğ¸Ğ¼ĞµĞ½Ğ¸Ğ½Ğ½Ğ¸ĞºĞ¾Ğ².')
    def nicejoke():
        req = requests.get("https://api.humorapi.com/jokes/random?api-key=ddb5a27446fc44f4b87496e160b46711").text
        jsonText = json.loads(req)
        lolkek = jsonText["joke"]
        result = translator.translate(lolkek)
        bot.send_message(group_id, result)

@bot.message_handler(regexp='ĞĞ¿Ñ‚Ñ ĞºĞ°Ğº Ñ‚Ñ‹?')
def event(message):
    random_answer_event = ['ĞŸĞ¾ ĞºĞ°Ğ½Ğ°Ğ»Ñƒ ĞšĞ¸Ğ½Ğ¾ Ğ¢Ğ’ ĞšÑ€Ğ¸Ğ¼Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ‡Ñ‚Ğ¸Ğ²Ğ¾ Ğ¸Ğ´Ñ‘Ñ‚ ğŸ˜ğŸ‘Œ',
                        'Ğ ĞµĞ±ÑÑ‚Ğ° Ñƒ Ğ¼ĞµĞ½Ñ Ñ 18 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ Ğ¾Ñ‚Ğ¿ÑƒÑĞº . Ğ¯ Ğ²ÑÑ‘ Ñ‚Ğ°ĞºĞ¸ Ğ’Ğ°Ñ ÑĞ¾Ğ±ĞµÑ€Ñƒ !',
                        'ĞŸĞ¾ Ñ‚Ğ² 3 Ğ¨Ğ°ĞºĞ°Ğ» Ğ½Ğ°Ñ‡Ğ°Ğ»ÑÑ Ñ Ğ‘Ñ€ÑÑĞ¾Ğ¼ Ğ£Ğ¸Ğ»ÑŒÑĞ¼ÑĞ¾Ğ¼',
                        'Ğ¯ Ğ²ÑĞµĞ³Ğ´Ğ° Ğ·Ğ°ğŸ‘ğŸ™ğŸ¥³',
                        'Ğ ĞµĞ±Ğ·Ñ, Ñ Ğ² ĞºĞ¸Ğ½Ğ¾...',
                        'Ğ¥Ğ¾Ñ‡Ñƒ Ğ¥Ğ°Ñ€Ğ´ĞºĞ¾Ñ€!!!ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸ğŸ¥³ğŸ¥³ğŸ¥³ğŸ™ƒğŸ™ƒğŸ™ƒ',
                        'Ğ¯ Ğ² Ğ¡Ñ‚Ğ°Ñ€Ğ¾Ğ¼ Ğ°Ğ¼Ğ±Ğ°Ñ€Ğµ Ğ² ÑĞµĞ´ÑŒĞ¼Ğ¾Ğ¼...))) ĞŸĞ°ÑĞ¿Ğ¾Ñ€Ñ‚ Ğ·Ğ°Ğ³Ñ€Ğ°Ğ½Ğ½Ğ¸Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»!)))',
                        'Ğ”Ğ° Ñ ÑƒĞ¶ Ğ´Ğ¾Ğ¼Ğ°...))) Ğ¥Ğ¾Ñ‚ĞµĞ» Ğ¿Ğ¸Ğ²Ğ°Ñ Ğ¿Ğ¾Ğ¿Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹...)))',
                        'Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ Ğ¿Ñ€Ğ¸ĞµĞ´Ñƒ ğŸ¤£ğŸ¤£ğŸ¤£',
                        'ĞšÑƒĞ´Ğ° ĞµÑ…Ğ°Ñ‚ÑŒ?ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸ğŸ‘»ğŸ‘»ğŸ‘»',
                        'Ğ¤Ğ°ÑˆĞ¸ÑÑ‚Ğ° ÑĞ»ÑƒÑˆĞ°Ñ ĞšĞ°Ğ·Ğ°Ğ½Ñ‚Ğ¸Ğ¿ 2004 Ğ³Ğ¾Ğ´ ğŸ”¥ğŸ”¥ğŸ‘ŒğŸ˜ŠğŸ‘ğŸ‘ğŸ‘ğŸ’¯ğŸ’¯ğŸ’¯',
                        'ĞĞ° Ñ„Ğ¸Ğ»ÑŒĞ¼ Ğ¡ĞºĞ°Ğ½Ğ´Ğ°Ğ» Ğ¿Ğ¾ÑˆÑ‘Ğ».)))) Ğ£Ğ¶ Ğ±Ğ¾Ğ»ÑŒĞ½Ğ¾ Ğ¼Ğ½Ğµ Ğ°ĞºÑ‚Ñ€Ğ¸ÑÑ‹ Ğ½Ñ€Ğ°Ğ²ÑÑ‚ÑÑ ğŸ˜œğŸ˜ƒğŸ˜ƒğŸ˜ƒ',
                        'Ğ£ ĞºĞ¾Ğ³Ğ¾ ĞºĞ°ĞºĞ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ?',
                        'ĞšĞ¾Ğ³Ğ´Ğ° ÑÑ…Ğ¾Ğ´ Ñ€ĞµĞ±Ğ·Ñ?!',
                        'ĞĞ°Ñ‡Ğ°Ğ»Ğ¸ÑÑŒ Ñ‚ÑƒĞ¿Ñ‹Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤©ğŸ¤©ğŸ¤©',
                        'Ğ¯ Ñ‚ÑƒÑ‚ Ğ¾Ğ´Ğ½Ğ¾ Ğ¼ÑƒĞ¶Ğ¸Ñ‡ĞºĞ° Ğ½Ğ°ÑˆÑ‘Ğ», Ğ½Ğ°Ğ²ĞµÑ€Ğ½Ğ¾Ğµ Ğ¼Ğ¾Ğ¹ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾Ğ´ĞºĞ°, Ğ¼ÑƒĞ·Ñ‹ĞºÑƒ Ğ¿Ğ¸ÑˆĞµÑ‚ ÑĞ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ½ÑƒÑ Ğ˜Ğ»ÑŒÑˆĞ°Ñ‚ Ğ“Ğ°Ğ·Ğ¸Ğ·Ğ¾Ğ². ĞšĞ°Ğº Ğ½Ğ¸Ğ±ÑƒĞ´ÑŒ ĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑĞ¸Ğ¼ Ğº Ğ½Ğ°Ğ¼ Ğ½Ğ° ÑÑ…Ğ¾Ğ´!))))',
                        'Ğ ĞµĞ±ÑÑ‚Ğ° Ñ Ğ² Ğ¾Ñ‚Ğ¿ÑƒÑĞº ğŸ¥³ğŸ¥³ğŸ¥³ğŸ»ğŸ»ğŸ»ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ŒğŸ˜ƒ',
                        'Ğ ĞµĞ±ÑÑ‚Ğ° Ğ¿Ğ¾ĞºĞ° Ñ Ğ² Ğ¾Ñ‚Ğ¿ÑƒÑĞºĞµ, Ğ¼Ğ¾Ğ¶ĞµÑ‚ ĞºĞ°Ğº Ğ½Ğ¸Ğ±ÑƒĞ´ÑŒ Ğ² Ñ‚Ğ¸Ñ…Ğ¾Ñ€Ñ ÑÑ‚Ñ€ĞµĞ»Ğ±Ğ°Ğ½? Ğ£ ĞºĞ¾Ğ³Ğ¾ ĞµÑÑ‚ÑŒ ĞºĞ°ĞºĞ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ?',
                        'Ğ¯+']
    
    bot.send_message(message.chat.id, random.choice(random_answer_event))

@bot.message_handler(content_types=["pinned_message", "photo", "voice", "video"])
def reply_genius(message):
    random_answer = [
                    'Ğ“ĞµĞ½Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ ğŸ‘ğŸ‘ğŸ‘ğŸ”¥ğŸ”¥ğŸ”¥ğŸ¥°ğŸ¥°ğŸ¥°ğŸ˜ƒğŸ˜ƒğŸ˜ƒ',
                    'Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ ÑÑƒĞ´ÑŒÑ ğŸ‘ğŸ”¥ğŸ˜ŠğŸ˜ŠğŸ˜Š', 
                    'Ğ“ĞµĞ½Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ˜ğŸ˜ğŸ˜',
                    'Ğ¡Ğ¿Ğ°ÑĞ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸ ğŸ™ğŸ™ğŸ™ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸ğŸ¤£ğŸ¤£ğŸ¤£',
                    'Ğ¯ Ğ² ÑˆĞ¾ĞºĞµ!!!ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸ğŸ™ğŸ™ğŸ™ğŸ˜ƒğŸ˜ƒğŸ˜ƒğŸ”¥ğŸ”¥ğŸ”¥ğŸ¥°ğŸ¥°ğŸ¥°'
                    'Ğ•ÑĞ»Ğ¸ Ñ‡ĞµÑÑ‚Ğ½Ğ¾ Ğ¼Ğ½Ğµ ÑÑ‚Ğ¾Ñ‚ Ñ‚ĞµĞ»ĞµĞ³Ñ€Ğ°Ğ¼Ğ¼ Ğ½Ğµ Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ. Ğ’Ğ°Ñ‚ÑĞ°Ğ¿Ñƒ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ...(((((',
                    'Ğ’Ğ¾Ñ‚ Ñ‡Ñ‚Ğ¾ Ğ±Ñ‹Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ Ğ¿ÑŒÑ‘ÑˆÑŒ Ğ¸ Ğ·Ğ° Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²Ñ‹Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ·, ĞºÑƒĞºÑƒÑˆĞºĞ° ĞµÑ…Ğ°Ñ‚ÑŒ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚.))))))',
                    'ğŸ‘ğŸ‘ğŸ‘ğŸ‘',
                    'ĞÑ‚ Ğ´ÑƒÑˆĞ¸ ğŸ”¥ğŸ”¥ğŸ”¥ğŸ¥°ğŸ¥°ğŸ¥°ğŸ‘ğŸ‘ğŸ‘',
                    'Ğ“ÑƒĞ´ ğŸ˜ğŸ˜ğŸ˜ğŸ‘ğŸ‘ğŸ‘',
                    'ĞÑ‚ Ğ´ÑƒÑˆĞ¸, Ğ´Ñ€ÑƒĞ¶Ğ¸Ñ‰Ğµ, Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾!!!ğŸ”¥ğŸ”¥ğŸ”¥ğŸ’¯ğŸ’¯ğŸ’¯ğŸ˜ğŸ˜ğŸ’ªğŸ’ªğŸ’ªğŸ™ğŸ™ğŸ‘ğŸ¥©ğŸ¥©ğŸ¥©',
                    'Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾!!!!ğŸ‘ğŸ‘ğŸ‘ğŸ”¥ğŸ”¥ğŸ”¥ğŸ’¯ğŸ’¯ğŸ’¯ğŸ¥°ğŸ¥°ğŸ¥°',
                    'Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğµ Ğ’Ğ°Ğ¼!!ğŸ”¥ğŸ”¥ğŸ”¥ğŸ’¯ğŸ˜ğŸ˜ğŸ˜ğŸ‘ğŸ‘ğŸ‘',
                    'Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğµ ğŸ‘ğŸ‘ğŸ‘ğŸ”¥ğŸ”¥ğŸ”¥ğŸ’¯ğŸ’¯ğŸ¥°ğŸ¥°ğŸ¥°',
                    'ğŸ‘ğŸ‘ğŸ‘ğŸ”¥ğŸ”¥ğŸ”¥ğŸ’¯ğŸ’¯ğŸ’¯ğŸ¥©ğŸ¥©ğŸ¥©ğŸ¥°ğŸ¥°ğŸ¥°ğŸ‘ğŸ‘ğŸ‘ğŸ‘',
                    'ğŸ”ˆğŸ”ˆğŸ”ˆğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥©ğŸ¥©ğŸ¥©ğŸ”¥ğŸ”¥ğŸ”¥ğŸ’¯ğŸ’¯ğŸ’¯ğŸ‘ğŸ‘ğŸ‘ğŸ˜˜ğŸ˜˜ğŸ˜˜'
                    'Ğ­Ñ‚Ğ¾ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ½Ğ¾Ğ¹ ÑˆĞµĞ´ĞµĞ²Ñ€ ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘',
                    ]
    bot.send_message(message.chat.id, random.choice(random_answer), reply_to_message_id=message.message_id)

@bot.message_handler(commands=['insultMe'])
def greet(message):
    text = requests.get("https://insult.mattbas.org/api/insult").text
    result = translator.translate(text)
    bot.reply_to(message, result)
@bot.message_handler(regexp='insultMe')
def greet(message):
    text = requests.get("https://insult.mattbas.org/api/insult").text
    result = translator.translate(text)
    bot.reply_to(message, result)

bot.polling()
